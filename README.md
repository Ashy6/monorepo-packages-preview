# Monorepo Packages Preview

è¿™æ˜¯ä¸€ä¸ªåŸºäº **pnpm workspace** å’Œ **Turborepo** æ„å»ºçš„ Monorepo é¡¹ç›®ã€‚è¯¥é¡¹ç›®æ—¨åœ¨ç®¡ç†ã€å¼€å‘ã€æµ‹è¯•å’Œæ¼”ç¤ºä¸€å¥— React ç»„ä»¶åº“åŠç›¸å…³å·¥å…·åº“ã€‚

é¡¹ç›®ä¸ä»…åŒ…å«å¯å¤ç”¨çš„ npm åŒ…ï¼ˆPackagesï¼‰ï¼Œè¿˜åŒ…å«ç”¨äºå¼€å‘é¢„è§ˆï¼ˆPreview UIï¼‰ã€çœŸå®åœºæ™¯æ¨¡æ‹Ÿï¼ˆPreview Toolsï¼‰ä»¥åŠæ–‡æ¡£ï¼ˆDocsï¼‰çš„åº”ç”¨ç¨‹åºã€‚

## ğŸ— æŠ€æœ¯æ¶æ„

- **åŒ…ç®¡ç†å™¨**: [pnpm](https://pnpm.io/) (Workspaces) - é«˜æ•ˆçš„ä¾èµ–ç®¡ç†å’Œå¤šåŒ…æ”¯æŒã€‚
- **æ„å»ºç³»ç»Ÿ**: [Turborepo](https://turbo.build/) - å¢é‡æ„å»ºå’Œä»»åŠ¡ç¼–æ’ã€‚
- **æ‰“åŒ…å·¥å…·**:
  - [tsup](https://tsup.egoist.dev/) - ç”¨äºæ‰“åŒ… library (packages/*)ï¼ŒåŸºäº esbuildï¼Œé€Ÿåº¦æå¿«ã€‚
  - [Vite](https://vitejs.dev/) - ç”¨äºæ„å»ºåº”ç”¨ (apps/preview-*)ï¼Œæä¾›æè‡´çš„å¼€å‘ä½“éªŒã€‚
- **å‰ç«¯æ¡†æ¶**: React 18
- **æ ·å¼æ–¹æ¡ˆ**: [Tailwind CSS](https://tailwindcss.com/)
- **æ–‡æ¡£æ¡†æ¶**: Next.js (apps/docs)

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ apps/                   # åº”ç”¨ç¨‹åºå±‚
â”‚   â”œâ”€â”€ docs/               # æ–‡æ¡£ç«™ç‚¹ (Next.js)
â”‚   â”œâ”€â”€ preview-tools/      # [æ¶ˆè´¹è€…è§†è§’] ç»„ä»¶åº“ä½¿ç”¨ç¤ºä¾‹ä¸æ¼”ç¤ºé¡¹ç›® (Vite)
â”‚   â”‚                       # æ¨¡æ‹ŸçœŸå®é¡¹ç›®å¼•å…¥ npm åŒ…çš„ä½¿ç”¨åœºæ™¯
â”‚   â””â”€â”€ preview-ui/         # [å¼€å‘è€…è§†è§’] ç»„ä»¶åº“å¼€å‘é¢„è§ˆç¯å¢ƒ (Vite)
â”‚                           # ç±»ä¼¼äº Storybookï¼Œç”¨äºéš”ç¦»å¼€å‘å’Œæµ‹è¯•ç»„ä»¶
â”‚
â”œâ”€â”€ packages/               # æ ¸å¿ƒåº“å±‚ (å‘å¸ƒçš„ npm åŒ…)
â”‚   â”œâ”€â”€ hooks/              # (@ashy1949/repo-hooks) React Hooks åº“
â”‚   â”œâ”€â”€ libs/               # (@ashy1949/repo-libs) ç¬¬ä¸‰æ–¹åº“å°è£… (å¦‚ Web3/Wagmi é…ç½®)
â”‚   â”œâ”€â”€ ui/                 # (@ashy1949/repo-ui) React UI ç»„ä»¶åº“
â”‚   â””â”€â”€ utils/              # (@ashy1949/repo-utils) é€šç”¨å·¥å…·å‡½æ•°åº“
â”‚
â”œâ”€â”€ package.json            # æ ¹ä¾èµ–ä¸è„šæœ¬
â”œâ”€â”€ pnpm-workspace.yaml     # pnpm å·¥ä½œåŒºé…ç½®
â””â”€â”€ turbo.json              # Turborepo ä»»åŠ¡ç®¡é“é…ç½®
```

## ğŸ“¦ æ¨¡å—è¯¦è§£

### Packages (æ ¸å¿ƒåº“)

æ‰€æœ‰åŒ…å‡ä½äº `packages/` ç›®å½•ä¸‹ï¼Œç»Ÿä¸€ä½¿ç”¨ `tsup` è¿›è¡Œæ‰“åŒ…ï¼Œæ”¯æŒ ESM å’Œ CJS æ ¼å¼ã€‚

1. **@ashy1949/repo-ui** (`packages/ui`)
    - **ä½œç”¨**: æä¾›åŸºç¡€ UI ç»„ä»¶ã€‚
    - **å†…å®¹**: Button, Card, Input, Modal, Tag ç­‰ç»„ä»¶ã€‚
    - **ç‰¹ç‚¹**: é›†æˆ Tailwind CSS æ ·å¼ã€‚

2. **@ashy1949/repo-hooks** (`packages/hooks`)
    - **ä½œç”¨**: æä¾›å¸¸ç”¨çš„ React Hooksã€‚
    - **å†…å®¹**: `useToggle`, `useDebounce`, `useLocalStorage`, `useEventListener` ç­‰ã€‚

3. **@ashy1949/repo-utils** (`packages/utils`)
    - **ä½œç”¨**: æä¾›çº¯å‡½æ•°å·¥å…·ã€‚
    - **å†…å®¹**: `formatDate`, `currencyFormatter`, `truncateString`, `deepClone` ç­‰ã€‚

4. **@ashy1949/repo-libs** (`packages/libs`)
    - **ä½œç”¨**: å°è£…å’Œé¢„é…ç½®å¤æ‚çš„ç¬¬ä¸‰æ–¹åº“ã€‚
    - **å†…å®¹**: Wagmi (Web3) è¿æ¥é…ç½®ä¸ `useWalletConnection` é’©å­ã€‚

### Apps (åº”ç”¨)

1. **Preview UI** (`apps/preview-ui`)
    - **å®šä½**: **ç»„ä»¶åº“å¼€å‘è€…çš„å·¥ä½œå°**ã€‚
    - **åŠŸèƒ½**: ç›´æ¥å¼•ç”¨ `packages/*` æºç ï¼Œç”¨äºåœ¨å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶è°ƒè¯•ç»„ä»¶ã€Hooks å’Œå·¥å…·å‡½æ•°ã€‚
    - **ç‰¹ç‚¹**: åŒ…å«ç»„ä»¶çš„ Props è°ƒè¯•å’Œå„ç§è¾¹ç•Œæƒ…å†µæµ‹è¯•ã€‚

2. **Preview Tools** (`apps/preview-tools`)
    - **å®šä½**: **ç»„ä»¶åº“ä½¿ç”¨è€…çš„å‚è€ƒç¤ºä¾‹**ã€‚
    - **åŠŸèƒ½**: æ¨¡æ‹Ÿä½œä¸ºä¸€ä¸ªå¤–éƒ¨é¡¹ç›®ï¼Œå¦‚ä½•å¼•å…¥å’Œä½¿ç”¨è¿™äº› npm åŒ…ã€‚
    - **ç‰¹ç‚¹**:
        - æä¾›å®Œæ•´çš„ä»£ç ä½¿ç”¨ç¤ºä¾‹ï¼ˆCode Snippetsï¼‰ã€‚
        - å±•ç¤ºç»„ä»¶åœ¨å®é™…ä¸šåŠ¡å¸ƒå±€ä¸­çš„æ•ˆæœã€‚
        - éªŒè¯åŒ…çš„å¯¼å‡ºï¼ˆExportsï¼‰å’Œç±»å‹å®šä¹‰ï¼ˆTypesï¼‰æ˜¯å¦æ­£ç¡®ã€‚

3. **Docs** (`apps/docs`)
    - **å®šä½**: é¡¹ç›®æ–‡æ¡£ç«™ç‚¹ã€‚
    - **åŠŸèƒ½**: æ‰˜ç®¡é™æ€æ–‡æ¡£å’Œæ›´è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16
- pnpm (æ¨èæœ€æ–°ç‰ˆ)

### å®‰è£…ä¾èµ–

åœ¨æ ¹ç›®å½•è¿è¡Œï¼š

```bash
pnpm install
```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

å¯åŠ¨æ‰€æœ‰åº”ç”¨å’ŒåŒ…çš„ç›‘å¬æ¨¡å¼ï¼ˆåˆ©ç”¨ Turborepo å¹¶è¡Œæ‰§è¡Œï¼‰ï¼š

```bash
pnpm dev
```

### å•ç‹¬å¯åŠ¨æŸä¸ªé¡¹ç›®

å¦‚æœä½ åªæƒ³ä¸“æ³¨äºæŸä¸ªéƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨ï¼š

```bash
# åªå¯åŠ¨ Preview UI
pnpm --filter preview-ui dev

# åªå¯åŠ¨ Preview Tools
pnpm --filter preview-tools dev

# ç›‘å¬ç¼–è¯‘ UI åŒ…
pnpm --filter @ashy1949/repo-ui dev
```

### æ„å»ºé¡¹ç›®

æ„å»ºæ•´ä¸ª Monorepoï¼š

```bash
pnpm build
```

### å‘å¸ƒåŒ…

è¿›å…¥å¯¹åº”çš„åŒ…ç›®å½•è¿›è¡Œå‘å¸ƒï¼ˆéœ€ç™»å½• npmï¼‰ï¼š

```bash
cd packages/ui
npm publish --access public
```

## ğŸ›  å¼€å‘æµç¨‹å»ºè®®

1. **å¼€å‘æ–°ç»„ä»¶**:
    - åœ¨ `packages/ui` ä¸­åˆ›å»ºç»„ä»¶ã€‚
    - åœ¨ `apps/preview-ui` ä¸­æ·»åŠ æ¼”ç¤ºç”¨ä¾‹ï¼Œè¿›è¡Œå®æ—¶è°ƒè¯•ã€‚
2. **éªŒè¯å‘å¸ƒ**:
    - å®Œæˆå¼€å‘åï¼Œæ‰§è¡Œ `pnpm build` ç¡®ä¿æ„å»ºæˆåŠŸã€‚
    - åœ¨ `apps/preview-tools` ä¸­æ·»åŠ ä½¿ç”¨ç¤ºä¾‹ï¼ŒéªŒè¯ç»„ä»¶ä½œä¸ºä¾èµ–åŒ…æ—¶çš„è¡¨ç°ã€‚
3. **å‘å¸ƒ**:
    - æ›´æ–°ç‰ˆæœ¬å·ã€‚
    - å‘å¸ƒåˆ° npm registryã€‚
